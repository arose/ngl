<!DOCTYPE html>
<html lang="en">

    <head>

        <title>NGL</title>

        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">

        <link rel="stylesheet" href="../css/font-awesome.min.css" />
        <link rel="stylesheet" href="../css/dark.css" id="theme" />

    </head>

    <body>

        <script src="../js/three.js"></script>
        <script src="../js/three/Detector.js"></script>
        <script src="../js/three/libs/dat.gui.min.js"></script>
        <script src="../js/three/libs/stats.min.js"></script>
        <script src="../js/three/controls/TrackballControls.js"></script>
        <script src="../js/three/loaders/OBJLoader.js"></script>
        <script src="../js/three/loaders/PLYLoader.js"></script>

        <script src="../js/three/shaders/CopyShader.js"></script>
        <script src="../js/three/shaders/SSAOShader.js"></script>
        <script src="../js/three/shaders/FXAAShader.js"></script>
        <script src="../js/three/shaders/DotScreenShader.js"></script>

        <script src="../js/three/postprocessing/EffectComposer.js"></script>
        <script src="../js/three/postprocessing/RenderPass.js"></script>
        <script src="../js/three/postprocessing/MaskPass.js"></script>
        <script src="../js/three/postprocessing/ShaderPass.js"></script>

        <script src="../js/threex.rendererstats.js"></script>

        <script src="../js/lib/vlist.js"></script>
        <script src="../js/lib/ui/signals.min.js"></script>
        <script src="../js/lib/ui/ui.js"></script>

        <script src="../js/ngl.js"></script>
        <script src="../js/ngl.wip.js"></script>
        <script src="../js/ngl.alt.js"></script>
        <script src="../js/ngl.structure.js"></script>
        <script src="../js/ngl.extra.js"></script>
        <script src="../js/ngl.gui.js"></script>

        <script>

            if ( ! Detector.webgl ) Detector.addGetWebGLMessage();

            document.addEventListener("DOMContentLoaded", function() {

                NGL.init( function(){

                    var stage = new NGL.Stage();

                    var viewport = new NGL.ViewportWidget( stage ).setId( 'viewport' );
                    document.body.appendChild( viewport.dom );

                    var toolbar = new NGL.ToolbarWidget( stage ).setId( 'toolbar' );
                    document.body.appendChild( toolbar.dom );

                    var menubar = new NGL.MenubarWidget( stage ).setId( 'menubar' );
                    document.body.appendChild( menubar.dom );

                    var sidebar = new NGL.SidebarWidget( stage ).setId( 'sidebar' );
                    document.body.appendChild( sidebar.dom );

                    // sidebar.add( new NGL.VirtualListWidget( new Array( 10000 ) ) );

                    // FIXME
                    stage.viewer.onWindowResize();
                    stage.viewer.onWindowResize();

                    // stage.loadFile( "../data/__example__/3pqr.pdb" );
                    
                    stage.loadFile( "../data/__example__/md.gro", function( o ){

                        o.addRepresentation( "line", "*" );
                        o.addRepresentation( "ribbon", "protein" );
                        o.centerView();

                        var xtcPath = "__example__/md.xtc";

                        var trajectory = new NGL.Trajectory( xtcPath, o.structure );

                        setTimeout(function(){
                            
                            trajectory.loadFrame( 10, function(){

                                o.reprList.forEach( function( repr ){

                                    repr.update();

                                } );

                            } );

                        }, 2000);

                    } );
                    

                } );

            } );

        </script>

    </body>

</html>
